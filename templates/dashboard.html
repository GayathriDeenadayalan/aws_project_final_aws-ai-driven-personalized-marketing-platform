<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard | IntelliCart</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=EB+Garamond:wght@300;400;500&display=swap" rel="stylesheet">

<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
        font-family: 'EB Garamond', serif;
        background: #f8f6f3;
        color: #1a1a1a;
    }

    /* ELEGANT TOP BAR */
    .elegance-bar {
        background: rgba(34,34,34,0.9);
        color: #f5f5f5;
        text-align: center;
        padding: 10px 0;
        font-size: 13px;
        letter-spacing: 1.5px;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1300;
    }

    /* NAVIGATION */
    .navbar {
        position: fixed;
        top: 42px;
        left: 0;
        right: 0;
        background: rgba(255,255,255,0.98);
        backdrop-filter: blur(20px);
        padding: 18px 8%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 4px 30px rgba(0,0,0,0.08);
        z-index: 1200;
    }

    .logo {
        font-family: 'Cinzel', serif;
        font-size: 28px;
        font-weight: 700;
        color: #2d1810;
    }

    .nav-menu {
        display: flex;
        gap: 18px;
        align-items: center;
    }

    .nav-menu a {
        font-family: 'Cinzel', serif;
        text-decoration: none;
        color: #4a4a4a;
        font-size: 14px;
        padding: 8px 20px;
        transition: 0.3s ease;
    }
    .nav-menu a:hover, .nav-menu .active {
        color: #d4a574;
    }

    .btn-logout {
        padding: 8px 20px;
        border: 2px solid #d4a574;
        background: transparent;
        font-family: 'Cinzel', serif;
        letter-spacing: 1px;
        font-size: 13px;
        cursor: pointer;
        transition: 0.3s ease;
    }
    .btn-logout:hover {
        background: #d4a574;
        color: #1a1a1a;
    }

    /* MAIN SECTION */
    .container {
        margin-top: 140px;
        padding: 0 8%;
        max-width: 1400px;
        margin-left: auto;
        margin-right: auto;
    }

    .welcome {
        text-align: center;
        margin-bottom: 40px;
    }
    .welcome h2 {
        font-family: 'Cinzel', serif;
        font-size: clamp(2.5rem, 6vw, 3.5rem);
        color: #1a1a1a;
        margin-bottom: 8px;
    }
    .welcome p {
        font-size: 1.2rem;
        color: #5a4a3a;
        font-style: italic;
    }

    /* DASHBOARD METRICS */
    .metrics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 24px;
        margin-bottom: 50px;
    }

    .metric-card {
        background: rgba(255,255,255,0.95);
        padding: 28px;
        border-radius: 20px;
        box-shadow: 0 25px 60px rgba(0,0,0,0.1);
        text-align: center;
        border: 1px solid rgba(212,165,116,0.2);
    }

    .metric-card h3 {
        font-family: 'Cinzel', serif;
        color: #d4a574;
        font-size: 36px;
        margin-bottom: 6px;
    }
    .metric-card p {
        font-size: 15px;
        color: #4a4a4a;
    }

    /* RECENT ACTIVITY */
    .activity-section {
        background: rgba(255,255,255,0.96);
        padding: 30px 28px;
        border-radius: 20px;
        box-shadow: 0 30px 70px rgba(0,0,0,0.12);
        border: 1px solid rgba(212,165,116,0.2);
    }

    .activity-section h3 {
        font-family: 'Cinzel', serif;
        font-size: 24px;
        margin-bottom: 18px;
        color: #1a1a1a;
    }

    .activity-item {
        display: flex;
        justify-content: space-between;
        padding: 14px 0;
        border-bottom: 1px solid #eee;
    }
    .activity-item:last-child { border-bottom: none; }

    .activity-label {
        font-size: 15px;
        font-weight: 500;
    }
    .activity-meta {
        text-align: right;
        font-size: 13px;
        color: #5a4a3a;
    }

    .badge {
        padding: 6px 12px;
        border-radius: 16px;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
    }
    .badge-active { background: #4ecdc4; color: white; }
    .badge-deployed { background: #b89578; color: white; }

    @media (max-width: 768px) {
        .nav-menu { flex-wrap: wrap; justify-content: center; gap: 12px; }
    }

</style>
</head>

<body>

<!-- TOP BAR -->
<div class="elegance-bar">ðŸ“Š IntelliCart Admin Control Panel</div>

<!-- NAVIGATION -->
<nav class="navbar">
    <div class="logo">IntelliCart</div>
    <div class="nav-menu">
        <a href="dashboard.html" class="active">Dashboard</a>
        <a href="campaign.html">Campaign</a>
        <a href="campaign_history.html">History</a>
        <button class="btn-logout" onclick="logout()">Logout</button>
    </div>
</nav>

<!-- MAIN CONTENT -->
<div class="container">

    <div class="welcome">
        <h2>Admin Dashboard</h2>
        <p>Real-Time Campaign Insights & Status</p>
    </div>

    <!-- METRICS GRID -->
    <div class="metrics-grid">
        <div class="metric-card">
            <h3 id="totalCampaigns">0</h3>
            <p>Total Campaigns</p>
        </div>
        <div class="metric-card">
            <h3 id="activeCampaigns">0</h3>
            <p>Active Campaigns</p>
        </div>
        <div class="metric-card">
            <h3 id="deployedCampaigns">0</h3>
            <p>Deployed Campaigns</p>
        </div>
        <div class="metric-card">
            <h3 id="conversionRate">0%</h3>
            <p>Avg Conversion Rate</p>
        </div>
    </div>

    <!-- RECENT ACTIVITY -->
    <div class="activity-section">
        <h3>ðŸ“Œ Recent Campaign Activity</h3>
        <div id="recentActivity"></div>
    </div>

</div>

<script>
    function logout() {
        if(confirm("Logout from admin?")) window.location.href = "index.html";
    }

    function loadDashboard() {
        const campaigns = JSON.parse(localStorage.getItem("aiCampaigns") || "[]");

        const total = campaigns.length;
        const deployed = campaigns.filter(c => c.status === "Deployed").length;
        const active = total - deployed;

        document.getElementById("totalCampaigns").textContent = total;
        document.getElementById("activeCampaigns").textContent = active;
        document.getElementById("deployedCampaigns").textContent = deployed;

        if (campaigns.length > 0) {
            const avg = campaigns.reduce((sum,c) => sum + parseInt(c.converted||0), 0) / campaigns.length;
            document.getElementById("conversionRate").textContent = Math.round(avg) + "%";
        }

        loadRecentActivity(campaigns);
    }

    function loadRecentActivity(campaigns) {
        const box = document.getElementById("recentActivity");
        if (campaigns.length === 0) {
            box.innerHTML = "<p>No campaigns created yet.</p>";
            return;
        }
        box.innerHTML = campaigns.slice(0,5).map(c => `
            <div class="activity-item">
                <div>
                    <div class="activity-label"><strong>${c.subject}</strong></div>
                    <div class="activity-meta">${c.segment} â€¢ ${c.channel}</div>
                </div>
                <div>
                    <span class="badge ${c.status === 'Deployed'? 'badge-deployed':'badge-active'}">${c.status}</span><br>
                    <span class="activity-meta">${c.date}</span>
                </div>
            </div>
        `).join("");
    }

    document.addEventListener("DOMContentLoaded", loadDashboard);
    window.addEventListener("storage", loadDashboard);
</script>

</body>
</html>
